<% layout('layouts/boilerplate') %>
<h1 class="text-center m-3">List of all invoices</h1>
<div class=" col-6 offset-3 col-md-4 offset-md-4 col-lg-2 offset-lg-5 mt-4">
    <%- include('../partials/flash') %>
    </div>

<form action="/admin/userManagement?_method=PUT" method="POST" id="userManagement">
    <div class="col-6 offset-3 text-center col-md-10 offset-md-1 mt-4 text-md-start">
        <button class="btn btn-success" form="userManagement" id="myButton">Submit Changes</button>
    </div>
    <div class="col-md-10 mt-4 offset-1 d-none d-md-flex flex-row">
        <div class="col-3 col-md-3"><b>Id</b></div>
        <div class="col-3 col-md-2 "><b>Current Role</b></div>
        <div class="col-3 col-md-2"><b>Changed Role</b></div>
        <div class="col-3 col-md-2"></div>
    </div>
<div class="col-md-10 offset-1 mt-2">
        <div class='row mt-2'>
        <% for (let user of users) { %>
        <div class='row mt-4 d-flex flex-column flex-md-row justify-content-start text-md-start text-center'>
            <div class="col-md-3 mt-3 mt-md-0"><%=user.username%></div>
            <div class="col-md-2 mt-2 mt-md-0"><%=user.role %></div>
            <div class="col-6 offset-3 col-md-2 offset-md-0 mt-2 mt-md-0">
            <select class="form-select text-center" id="userRole" name="user[role]">
            <option selected value="<%=user.role%>"><%=user.role%></option>
            <% for (let choice of choices) { %>
                <% if (choice !== user.role){ %>
                <option value="<%=user._id%> <%=choice%>"><%=choice%></option>
                <% } %>
            <% } %> 
            </select>
           </div>
           <div class="col-6 offset-3 col-md-2 offset-md-0 mt-2 mt-md-0 d-flex justify-content-center">
           <form action="/admin/userManagement/<%=user._id%>/?_method=DELETE" method="POST" >
            <button class="btn btn-danger">Delete</button>
            </form>
           </div>
        </div>
        <% } %>
        </div>
</div>
</form>
<div class="col-md-10 mt-4 offset-1 d-flex flex-row">
</div>




        




 




